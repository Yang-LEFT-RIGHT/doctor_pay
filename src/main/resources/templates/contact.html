<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>联系反馈 - DocIM Stipend</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/contact.css">
    <link rel="stylesheet" href="css/notification.css">
    <!-- 引入联系反馈专用JavaScript -->
    <script src="js/contact-init.js" defer></script>
</head>
<body>
    <!-- 顶部导航栏将通过JavaScript动态生成 -->
    <div id="topBarContainer"></div>

    <!-- 通知弹窗 -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h3><i class="fas fa-bell"></i> 通知中心</h3>
            <div class="notification-actions">
                <button class="btn-mark-all-read" id="markAllReadBtn">
                    <i class="fas fa-check-double"></i> 全部已读
                </button>
                <button class="btn-clear-all" id="clearAllBtn">
                    <i class="fas fa-trash-alt"></i> 清空
                </button>
            </div>
        </div>
        
        <div class="notification-list" id="notificationList">
            <!-- 通知项将通过JavaScript动态生成 -->
        </div>
        
        <div class="notification-footer">
            <a href="notification-center.html" class="view-all-link">
                <i class="fas fa-external-link-alt"></i> 前往通知中心
            </a>
        </div>
    </div>
    
    <!-- 通知遮罩层 -->
    <div class="notification-overlay" id="notificationOverlay"></div>

    <div class="page-content">
        <!-- 侧边栏将通过JavaScript动态生成 -->
        <div id="sidebarContainer"></div>

        <div class="content-area">
            <!-- 页面标题区域 -->
            <div class="page-header">
                <div class="page-title-section">
                    <h1 class="page-title">联系反馈</h1>
                    <p class="page-subtitle">获取技术支持，提交使用反馈、建议和问题报告</p>
                </div>
            </div>
            
            <!-- 联系渠道 -->
            <div class="contact-channels">
                <div class="channel-card">
                    <div class="channel-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="channel-content">
                        <h3>技术支持</h3>
                        <p>系统故障、技术问题、紧急支持</p>
                        <div class="channel-details">
                            <div class="detail-item">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <div class="detail-label">邮箱</div>
                                    <div class="detail-value">support@docim.edu.cn</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <div class="detail-label">电话</div>
                                    <div class="detail-value">010-6275-1234</div>
                                </div>
                            </div>
                        </div>
                        <button class="channel-btn" data-action="support">
                            <i class="fas fa-comment-alt"></i>
                            联系技术支持
                        </button>
                    </div>
                </div>
                
                <div class="channel-card">
                    <div class="channel-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="channel-content">
                        <h3>功能建议</h3>
                        <p>新功能提议、系统改进建议</p>
                        <div class="channel-details">
                            <div class="detail-item">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <div class="detail-label">邮箱</div>
                                    <div class="detail-value">suggestions@docim.edu.cn</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-bullhorn"></i>
                                <div>
                                    <div class="detail-label">反馈周期</div>
                                    <div class="detail-value">每月评审一次</div>
                                </div>
                            </div>
                        </div>
                        <button class="channel-btn" data-action="suggestion">
                            <i class="fas fa-plus"></i>
                            提交功能建议
                        </button>
                    </div>
                </div>
                
                <div class="channel-card">
                    <div class="channel-icon">
                        <i class="fas fa-bug"></i>
                    </div>
                    <div class="channel-content">
                        <h3>问题报告</h3>
                        <p>系统缺陷、错误报告、异常情况</p>
                        <div class="channel-details">
                            <div class="detail-item">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <div class="detail-label">邮箱</div>
                                    <div class="detail-value">bugs@docim.edu.cn</div>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div>
                                    <div class="detail-label">响应时间</div>
                                    <div class="detail-value">24小时内确认</div>
                                </div>
                            </div>
                        </div>
                        <button class="channel-btn" data-action="bug">
                            <i class="fas fa-exclamation-circle"></i>
                            报告问题
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 在线反馈表单 -->
            <div class="feedback-section">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-edit"></i>
                        在线反馈表单
                    </h3>
                    <div class="section-actions">
                        <button class="btn-icon" id="saveDraftBtn" title="保存草稿">
                            <i class="fas fa-save"></i>
                        </button>
                        <button class="btn-icon" id="loadDraftBtn" title="加载草稿">
                            <i class="fas fa-folder-open"></i>
                        </button>
                    </div>
                </div>
                
                <form class="feedback-form" id="feedbackForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="feedbackType">反馈类型 *</label>
                            <select id="feedbackType" class="form-select" required>
                                <option value="">请选择反馈类型</option>
                                <option value="technical">技术支持请求</option>
                                <option value="bug">问题报告</option>
                                <option value="suggestion">功能建议</option>
                                <option value="improvement">系统改进</option>
                                <option value="other">其他反馈</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="feedbackPriority">优先级 *</label>
                            <select id="feedbackPriority" class="form-select" required>
                                <option value="">请选择优先级</option>
                                <option value="low">低 - 一般咨询</option>
                                <option value="normal" selected>中 - 普通问题</option>
                                <option value="high">高 - 影响使用</option>
                                <option value="urgent">紧急 - 系统故障</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackTitle">反馈标题 *</label>
                        <input type="text" id="feedbackTitle" class="form-input" placeholder="请简要描述您的反馈内容" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackDescription">详细描述 *</label>
                        <textarea id="feedbackDescription" class="form-textarea" rows="5" placeholder="请详细描述您遇到的问题、建议或需求..." required></textarea>
                        <div class="textarea-tools">
                            <span class="char-count" id="charCount">0/2000</span>
                            <div class="format-tools">
                                <button type="button" class="format-btn" data-format="bold" title="加粗">
                                    <i class="fas fa-bold"></i>
                                </button>
                                <button type="button" class="format-btn" data-format="italic" title="斜体">
                                    <i class="fas fa-italic"></i>
                                </button>
                                <button type="button" class="format-btn" data-format="list" title="列表">
                                    <i class="fas fa-list"></i>
                                </button>
                                <button type="button" class="format-btn" data-format="code" title="代码">
                                    <i class="fas fa-code"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row" id="additionalFields">
                        <!-- 动态字段将根据反馈类型显示 -->
                    </div>
                    
                    <div class="form-group">
                        <label for="attachments">附件</label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>点击或拖拽文件到此处上传</p>
                            <p class="upload-hint">支持图片、文档、日志文件，单个文件不超过10MB</p>
                            <input type="file" id="attachments" multiple style="display: none;">
                        </div>
                        <div class="file-list" id="fileList">
                            <!-- 上传的文件列表将动态生成 -->
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="contactName">联系人 *</label>
                            <input type="text" id="contactName" class="form-input" placeholder="请输入您的姓名" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactEmail">联系邮箱 *</label>
                            <input type="email" id="contactEmail" class="form-input" placeholder="请输入您的邮箱地址" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactPhone">联系电话</label>
                            <input type="tel" id="contactPhone" class="form-input" placeholder="请输入您的联系电话（选填）">
                        </div>
                    </div>
                    
                    <!-- <div class="form-group">
                        <label for="responsePreference">回复方式偏好</label>
                        <div class="preference-checkboxes">
                            <label class="checkbox-container" id="emailCheckbox">
                                <input type="checkbox" name="responsePref" value="email" checked>
                                <span class="checkmark"></span>
                                <span class="checkbox-label">
                                    <span class="checkbox-icon">
                                        <i class="fas fa-envelope"></i>
                                    </span>
                                    <span class="checkbox-text">
                                        <div class="checkbox-title">邮箱回复</div>
                                        <div class="checkbox-desc">通过邮件接收回复</div>
                                    </span>
                                </span>
                            </label>
                            
                            <label class="checkbox-container" id="systemCheckbox">
                                <input type="checkbox" name="responsePref" value="system">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">
                                    <span class="checkbox-icon">
                                        <i class="fas fa-comment-alt"></i>
                                    </span>
                                    <span class="checkbox-text">
                                        <div class="checkbox-title">站内消息</div>
                                        <div class="checkbox-desc">系统内查看通知</div>
                                    </span>
                                </span>
                            </label>
                            
                            <label class="checkbox-container" id="phoneCheckbox">
                                <input type="checkbox" name="responsePref" value="phone">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">
                                    <span class="checkbox-icon">
                                        <i class="fas fa-phone"></i>
                                    </span>
                                    <span class="checkbox-text">
                                        <div class="checkbox-title">电话回访</div>
                                        <div class="checkbox-desc">工作人员电话联系</div>
                                    </span>
                                </span>
                            </label>
                        </div>
                    </div> -->
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="previewBtn">
                            <i class="fas fa-eye"></i>
                            预览
                        </button>
                        <button type="submit" class="btn-primary" id="submitBtn">
                            <i class="fas fa-paper-plane"></i>
                            提交反馈
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- 反馈状态跟踪 -->
            <div class="status-section" id="statusSection" style="display: none;">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-tasks"></i>
                        反馈状态跟踪
                    </h3>
                    <button class="btn-icon" id="refreshStatusBtn" title="刷新状态">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <div class="status-timeline" id="statusTimeline">
                    <!-- 状态时间线将动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 全局帮助中心/页脚 -->
    <div class="global-footer">
        <div class="footer-container">
            <div class="footer-title">
                <i class="fas fa-life-ring"></i> 帮助中心与支持
            </div>
            
            <div class="footer-grid">
                <a href="javascript:void(0);" class="footer-card" id="guideLink">
                    <h4><i class="fas fa-book"></i> 使用指南</h4>
                    <p>了解系统基本操作流程，快速上手使用各项功能</p>
                </a>
                
                <a href="javascript:void(0);" class="footer-card" id="manualLink">
                    <h4><i class="fas fa-file-alt"></i> 用户手册</h4>
                    <p>详细功能说明文档，包含所有操作步骤和注意事项</p>
                </a>
                
                <a href="javascript:void(0);" class="footer-card" id="faqLink">
                    <h4><i class="fas fa-question-circle"></i> 常见问题</h4>
                    <p>快速查找和解决常见问题，包含故障排除方法</p>
                </a>
                
                <a href="contact.html" class="footer-card active">
                    <h4><i class="fas fa-comments"></i> 联系反馈</h4>
                    <p>获取技术支持，提交使用反馈、建议和问题报告</p>
                </a>
            </div>
        </div>
    </div>

    <!-- 引入通用脚本 -->
    <script src="js/theme.js"></script>
    <script src="js/contact.js"></script>
    <script src="js/notification.js"></script>
</body>
</html>